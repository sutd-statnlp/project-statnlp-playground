!function(){"use strict";function t(t){t.initialize()}angular.module("visualApp",["ngResource","ngAria","ui.router","angular-loading-bar","ngMaterial","oc.lazyLoad","chart.js"]).run(t),t.$inject=["stateHandler"]}(),function(){"use strict";function t(t){t.state("visual",{parent:"app",abstract:!0})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t){t.state("textshow",{parent:"visual",url:"/visual/textshow",data:{authorities:[]},params:{filePath:""},views:{"content@":{templateUrl:"app/visual/textshow/textshow.html",controller:"TextShowController",controllerAs:"vm"}},resolve:{filePath:["$stateParams",function(t){return t.filePath}]}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,a,n){function r(t){p={};var e={},a=d3.select("#per-line").property("checked");t.split(a?/\n/g:z).forEach(function(t){I.test(t)||(a||(t=t.replace(E,"")),T.test(t.toLowerCase())||(t=t.substr(0,A),e[t.toLowerCase()]=t,p[t=t.toLowerCase()]=(p[t]||0)+1))}),p=d3.entries(p).sort(function(t,e){return e.value-t.value}),p.forEach(function(t){t.key=e[t.key]}),o()}function o(){S.font(d3.select("#font").property("value")).spiral(d3.select("input[name=spiral]:checked").property("value")),f=d3.scale[d3.select("input[name=scale]:checked").property("value")]().range([10,100]),p.length&&f.domain([+p[p.length-1].value||1,+p[0].value]),w=0,C.style("display",null),b=[],S.stop().words(p.slice(0,m=Math.min(p.length,+d3.select("#max").property("value")))).start()}function i(t){C.text(++w+"/"+m)}function l(t,e){C.style("display","none"),x=e?Math.min(g/Math.abs(e[1].x-g/2),g/Math.abs(e[0].x-g/2),y/Math.abs(e[1].y-y/2),y/Math.abs(e[0].y-y/2))/2:1,b=t;var a=L.selectAll("text").data(b,function(t){return t.text.toLowerCase()});a.transition().duration(1e3).attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).style("font-size",function(t){return t.size+"px"}),a.enter().append("text").attr("text-anchor","middle").attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).style("font-size","1px").transition().duration(1e3).style("font-size",function(t){return t.size+"px"}),a.style("font-family",function(t){return t.font}).style("fill",function(t){return v(t.text.toLowerCase())}).text(function(t){return t.text});var n=j.append("g").attr("transform",L.attr("transform")),r=n.node();a.exit().each(function(){r.appendChild(this)}),n.transition().duration(1e3).style("opacity",1e-6).remove(),L.transition().delay(1e3).duration(750).attr("transform","translate("+[g>>1,y>>1]+")scale("+x+")")}function s(){d3.event.preventDefault();var t=document.createElement("canvas"),e=t.getContext("2d");t.width=g,t.height=y,e.translate(g>>1,y>>1),e.scale(x,x),b.forEach(function(t,a){e.save(),e.translate(t.x,t.y),e.rotate(t.rotate*Math.PI/180),e.textAlign="center",e.fillStyle=v(t.text.toLowerCase()),e.font=t.size+"px "+t.font,e.fillText(t.text,0,0),e.restore()}),M.attr("value","image/png"),P.attr("value",t.toDataURL("image/png")),k.node().submit()}function u(){d3.event.preventDefault(),M.attr("value","image/svg+xml;charset=utf-8"),P.attr("value",D.attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML),k.node().submit()}function c(t){$.get(t,function(t){null!==t&&r(t)},"text")}var d=this;d.isLoading=!0,a(function(){d.isLoading=!1},4e3),!function(t){function e(){function t(t,a,n){for(var r,o,i,l=([{x:0,y:0},{x:e[0],y:e[1]}],a.x),u=a.y,d=Math.sqrt(e[0]*e[0]+e[1]*e[1]),m=y(e),p=Math.random()<.5?1:-1,f=-p;(r=m(f+=p))&&(o=~~r[0],i=~~r[1],!(Math.min(o,i)>d));)if(a.x=l+o,a.y=u+i,!(a.x+a.x0<0||a.y+a.y0<0||a.x+a.x1>e[0]||a.y+a.y1>e[1])&&(!n||!s(a,t,e[0]))&&(!n||c(a,n))){for(var h,v=a.sprite,g=a.width>>5,b=e[0]>>5,x=a.x-(g<<4),w=127&x,A=32-w,C=a.y1-a.y0,$=(a.y+a.y0)*b+(x>>5),S=0;C>S;S++){h=0;for(var k=0;g>=k;k++)t[$+k]|=h<<A|(g>k?(h=v[S*g+k])>>>w:0);$+=b}return delete a.sprite,!0}return!1}var e=[256,256],m=a,f=n,h=r,v=o,g=i,y=d,b=[],x=1/0,A=d3.dispatch("word","end"),C=null,$={};return $.start=function(){function a(){for(var a,i=+new Date;+new Date-i<x&&++s<o&&C;)a=d[s],a.x=e[0]*(Math.random()+.5)>>1,a.y=e[1]*(Math.random()+.5)>>1,l(a,d,s),t(n,a,r)&&(c.push(a),A.word(a),r?u(r,a):r=[{x:a.x+a.x0,y:a.y+a.y0},{x:a.x+a.x1,y:a.y+a.y1}],a.x-=e[0]>>1,a.y-=e[1]>>1);s>=o&&($.stop(),A.end(c,r))}var n=p((e[0]>>5)*e[1]),r=null,o=b.length,s=-1,c=[],d=b.map(function(t,e){return{text:m.call(this,t,e),font:f.call(this,t,e),rotate:v.call(this,t,e),size:~~h.call(this,t,e),padding:i.call(this,t,e)}}).sort(function(t,e){return e.size-t.size});return C&&clearInterval(C),C=setInterval(a,0),a(),$},$.stop=function(){return C&&(clearInterval(C),C=null),$},$.timeInterval=function(t){return arguments.length?(x=null==t?1/0:t,$):x},$.words=function(t){return arguments.length?(b=t,$):b},$.size=function(t){return arguments.length?(e=[+t[0],+t[1]],$):e},$.font=function(t){return arguments.length?(f=d3.functor(t),$):f},$.rotate=function(t){return arguments.length?(v=d3.functor(t),$):v},$.text=function(t){return arguments.length?(m=d3.functor(t),$):m},$.spiral=function(t){return arguments.length?(y=w[t+""]||t,$):y},$.fontSize=function(t){return arguments.length?(h=d3.functor(t),$):h},$.padding=function(t){return arguments.length?(g=d3.functor(t),$):g},d3.rebind($,A,"on")}function a(t){return t.text}function n(){return"serif"}function r(t){return Math.sqrt(t.value)}function o(){return 30*(~~(6*Math.random())-3)}function i(){return 1}function l(t,e,a){if(!t.sprite){x.clearRect(0,0,(v<<5)/y,g/y);var n=0,r=0,o=0,i=e.length;for(a--;++a<i;){t=e[a],x.save(),x.font=~~((t.size+1)/y)+"px "+t.font;var l=x.measureText(t.text+"m").width*y,s=t.size<<1;if(t.rotate){var u=Math.sin(t.rotate*h),c=Math.cos(t.rotate*h),d=l*c,m=l*u,p=s*c,f=s*u;l=Math.max(Math.abs(d+f),Math.abs(d-f))+31>>5<<5,s=~~Math.max(Math.abs(m+p),Math.abs(m-p))}else l=l+31>>5<<5;if(s>o&&(o=s),n+l>=v<<5&&(n=0,r+=o,o=0),r+s>=g)break;x.translate((n+(l>>1))/y,(r+(s>>1))/y),t.rotate&&x.rotate(t.rotate*h),x.fillText(t.text,0,0),x.restore(),t.width=l,t.height=s,t.xoff=n,t.yoff=r,t.x1=l>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,n+=l}for(var b=x.getImageData(0,0,(v<<5)/y,g/y).data,w=[];--a>=0;){t=e[a];for(var l=t.width,A=l>>5,s=t.y1-t.y0,C=t.padding,$=0;s*A>$;$++)w[$]=0;if(n=t.xoff,null==n)return;r=t.yoff;for(var S=0,k=-1,M=0;s>M;M++){for(var $=0;l>$;$++){var P=A*M+($>>5),D=b[(r+M)*(v<<5)+(n+$)<<2]?1<<31-$%32:0;C&&(M&&(w[P-A]|=D),l-1>M&&(w[P+A]|=D),D|=D<<1|D>>1),w[P]|=D,S|=D}S?k=M:(t.y0++,s--,M--,r++)}t.y1=t.y0+k,t.sprite=w.slice(0,(t.y1-t.y0)*A)}}}function s(t,e,a){a>>=5;for(var n,r=t.sprite,o=t.width>>5,i=t.x-(o<<4),l=127&i,s=32-l,u=t.y1-t.y0,c=(t.y+t.y0)*a+(i>>5),d=0;u>d;d++){n=0;for(var m=0;o>=m;m++)if((n<<s|(o>m?(n=r[d*o+m])>>>l:0))&e[c+m])return!0;c+=a}return!1}function u(t,e){var a=t[0],n=t[1];e.x+e.x0<a.x&&(a.x=e.x+e.x0),e.y+e.y0<a.y&&(a.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function c(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function d(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function m(t){var e=4,a=e*t[0]/t[1],n=0,r=0;return function(t){var o=0>t?-1:1;switch(Math.sqrt(1+4*o*t)-o&3){case 0:n+=a;break;case 1:r+=e;break;case 2:n-=a;break;default:r-=e}return[n,r]}}function p(t){for(var e=[],a=-1;++a<t;)e[a]=0;return e}var f,h=Math.PI/180,v=64,g=2048,y=1;if("undefined"!=typeof document)f=document.createElement("canvas"),f.width=1,f.height=1,y=Math.sqrt(f.getContext("2d").getImageData(0,0,1,1).data.length>>2),f.width=(v<<5)/y,f.height=g/y;else{var b=require("canvas");f=new b(v<<5,g)}var x=f.getContext("2d"),w={archimedean:d,rectangular:m};x.fillStyle="red",x.textAlign="center",t.cloud=e}("undefined"==typeof exports?d3.layout||(d3.layout={}):exports);var m,p,f,h="!-#%-*,-/:;?@\\[-\\]_{}¡§«¶·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰૰෴๏๚๛༄-༒༔༺-༽྅࿐-࿔࿙࿚၊-၏჻፠-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳀-᳇᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰-⸻、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꫰꫱꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･",v=d3.scale.category20b(),g=960,y=600,b=[],x=1,w=0,A=30,C=d3.select("#status"),S=d3.layout.cloud().timeInterval(10).size([g,y]).fontSize(function(t){return f(+t.value)}).text(function(t){return t.key}).on("word",i).on("end",l),k=d3.select("body").append("form").attr("action","https://www.jasondavies.com/echo").attr("target","_self").attr("method","POST"),M=k.append("input").attr("type","hidden").attr("name","content-type"),P=k.append("input").attr("type","hidden").attr("name","echo"),D=d3.select("#vis").append("svg").attr("width",g).attr("height",y),j=D.append("g"),L=D.append("g").attr("transform","translate("+[g>>1,y>>1]+")");d3.select("#download-svg").on("click",u),d3.select("#download-png").on("click",s);var N=d3.select("#form").on("submit",function(){r(d3.select("#text").property("value")),d3.event.preventDefault()});N.selectAll("input[type=number]").on("click.refresh",function(){this.value!==this.defaultValue&&(o(),this.defaultValue=this.value)}),N.selectAll("input[type=radio], #font").on("change",o);var T=/^(i|me|my|myself|we|us|our|ours|ourselves|you|your|yours|yourself|yourselves|he|him|his|himself|she|her|hers|herself|it|its|itself|they|them|their|theirs|themselves|what|which|who|whom|whose|this|that|these|those|am|is|are|was|were|be|been|being|have|has|had|having|do|does|did|doing|will|would|should|can|could|ought|i'm|you're|he's|she's|it's|we're|they're|i've|you've|we've|they've|i'd|you'd|he'd|she'd|we'd|they'd|i'll|you'll|he'll|she'll|we'll|they'll|isn't|aren't|wasn't|weren't|hasn't|haven't|hadn't|doesn't|don't|didn't|won't|wouldn't|shan't|shouldn't|can't|cannot|couldn't|mustn't|let's|that's|who's|what's|here's|there's|when's|where's|why's|how's|a|an|the|and|but|if|or|because|as|until|while|of|at|by|for|with|about|against|between|into|through|during|before|after|above|below|to|from|up|upon|down|in|out|on|off|over|under|again|further|then|once|here|there|when|where|why|how|all|any|both|each|few|more|most|other|some|such|no|nor|not|only|own|same|so|than|too|very|say|says|said|shall)$/,E=new RegExp("["+h+"]","g"),z=/[ \f\n\r\t\v\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000\u3031-\u3035\u309b\u309c\u30a0\u30fc\uff70]+/g,I=/^(@|https?:|\/\/)/;d3.select("#random-palette").on("click",function(){paletteJSON("http://www.colourlovers.com/api/palettes/random",{},function(t){v.range(t[0].colors),L.selectAll("text").style("fill",function(t){return v(t.text.toLowerCase())})}),d3.event.preventDefault()}),function(){function t(){m=+d3.select("#angle-count").property("value"),c=Math.max(-90,Math.min(90,+d3.select("#angle-from").property("value"))),d=Math.max(-90,Math.min(90,+d3.select("#angle-to").property("value"))),e()}function e(){f.domain([0,m-1]).range([c,d]);var t=u.selectAll("path.angle").data([{startAngle:c*p,endAngle:d*p}]);t.enter().insert("path","circle").attr("class","angle").style("fill","#fc0"),t.attr("d",h);var r=u.selectAll("line.angle").data(d3.range(m).map(f));r.enter().append("line").attr("class","angle"),r.exit().remove(),r.attr("transform",function(t){return"rotate("+(90+t)+")"}).attr("x2",function(t,e){return e&&e!==m-1?-i:-i-5});var l=u.selectAll("path.drag").data([c,d]);l.enter().append("path").attr("class","drag").attr("d","M-9.5,0L-3,3.5L-3,-3.5Z").call(d3.behavior.drag().on("drag",function(t,r){t=(r?d:c)+90;var o=[-i*Math.cos(t*p),-i*Math.sin(t*p)],l=[d3.event.x,d3.event.y],s=~~(Math.atan2(a(o,l),n(o,l))/p);t=Math.max(-90,Math.min(90,t+s-90)),s=d-c,r?(d=t,s>360?c+=s-360:0>s&&(c=d)):(c=t,s>360?d+=360-s:0>s&&(d=c)),e()}).on("dragend",o)),l.attr("transform",function(t){return"rotate("+(t+90)+")translate(-"+i+")"}),S.rotate(function(){return f(~~(Math.random()*m))}),d3.select("#angle-count").property("value",m),d3.select("#angle-from").property("value",c),d3.select("#angle-to").property("value",d)}function a(t,e){return t[0]*e[1]-t[1]*e[0]}function n(t,e){return t[0]*e[0]+t[1]*e[1]}var i=40.5,l=35,s=20,u=d3.select("#angles").append("svg").attr("width",2*(i+l)).attr("height",i+1.5*s).append("g").attr("transform","translate("+[i+l,i+s]+")");u.append("path").style("fill","none").attr("d",["M",-i,0,"A",i,i,0,0,1,i,0].join(" ")),u.append("line").attr("x1",-i-7).attr("x2",i+7),u.append("line").attr("y2",-i-7),u.selectAll("text").data([-90,0,90]).enter().append("text").attr("dy",function(t,e){return 1===e?null:".3em"}).attr("text-anchor",function(t,e){return["end","middle","start"][e]}).attr("transform",function(t){return t+=90,"rotate("+t+")translate("+-(i+10)+")rotate("+-t+")translate(2)"}).text(function(t){return t+"°"});var c,d,m,p=Math.PI/180,f=d3.scale.linear(),h=d3.svg.arc().innerRadius(0).outerRadius(i);d3.selectAll("#angle-count, #angle-from, #angle-to").on("change",t).on("mouseup",t),t(),r(d3.select("#text").property("value"))}(),c(n)}angular.module("visualApp").controller("TextShowController",t),t.$inject=["$scope","$state","$timeout","filePath"]}(),function(){"use strict";function t(t){var e="api/nlu/";return t(e,{},{getSample:{method:"GET",url:"/content/data/nlu/nlu-sample.json"}})}angular.module("visualApp").factory("NluService",t),t.$inject=["$resource"]}(),function(){"use strict";function t(t){var e={};return e}angular.module("visualApp").factory("DialogService",t),t.$inject=["$mdDialog"]}(),function(){"use strict";function t(t){var e="api/data/";return t(e,{},{getSmsnp:{method:"GET",isArray:!0,url:"/content/data/smsnp-data.json"}})}angular.module("visualApp").factory("DataService",t),t.$inject=["$resource"]}(),function(){"use strict";function t(t){t.state("prediction",{parent:"app",abstract:!0})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t){t.state("nlu",{parent:"prediction",url:"/prediction/nlu",data:{authorities:[]},views:{"content@":{templateUrl:"app/prediction/nlu/nlu.html",controller:"NluController",controllerAs:"vm"}}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,a,n,r){function o(){return{labels:[],data:[],series:[],colors:[]}}function i(){m.emotionChart=o(),m.keywordChart=o(),m.categoryChart=o(),m.entityChart=o()}function l(){function t(t){s(t.emotion),u(t.keywords),c(t.categories),d(t.entities),m.isAnalyzing=!1}function e(t){console.log(t)}i(),a.getSample({},t,e)}function s(t){var e=t.document.emotion;m.emotionChart.labels=["sadness","joy","fear","disgust","anger"],m.emotionChart.data=[n.convertSmallNumberToPercent(e.sadness),n.convertSmallNumberToPercent(e.joy),n.convertSmallNumberToPercent(e.fear),n.convertSmallNumberToPercent(e.disgust),n.convertSmallNumberToPercent(e.anger)]}function u(t){for(var e=0;e<t.length;e++){var a=t[e];a.relevance=n.convertSmallNumberToPercent(a.relevance),m.keywordChart.labels.push(a.text),m.keywordChart.data.push(a.relevance)}}function c(t){for(var e=0;e<t.length;e++){var a=t[e];a.score=n.convertSmallNumberToPercent(a.score),m.categoryChart.labels.push(a.label),m.categoryChart.data.push(a.score)}}function d(t){for(var e=0;e<t.length;e++){var a=t[e];a.relevance=n.convertSmallNumberToPercent(a.relevance),m.entityChart.labels.push(a.text+" - "+a.type),m.entityChart.data.push(a.relevance),m.entityChart.colors.push(r.getColorFromText(a.type))}}var m=this;m.isAnalyzing=!0,m.text="In the rugged Colorado Desert of California, there lies buried a treasure ship sailed there hundreds of years ago by either Viking or Spanish explorers. Some say this is legend; others insist it is fact. A few have even claimed to have seen the ship, its wooden remains poking through the sand like the skeleton of a prehistoric beast. Among those who say they’ve come close to the ship is small-town librarian Myrtle Botts. In 1933, she was hiking with her husband in the Anza-Borrego Desert, not far from the border with Mexico. It was early March, so the desert would have been in bloom, its washed-out yellows and grays beaten back by the riotous invasion of wildflowers.",m.submitAnalyze=l,m.emotionChart=o(),m.keywordChart=o(),m.categoryChart=o(),m.entityChart=o()}angular.module("visualApp").controller("NluController",t),t.$inject=["$scope","$state","NluService","NumberUtils","ColorUtils"]}(),function(){"use strict";function t(t,e){var a=this;a.currentStage=e.current.name,$(document).ready(function(){var t=$("md-list-item");t.each(function(){var t=$(this).attr("data-state");a.currentStage==t&&$(this).addClass("m-bg-list-item")}),t.click(function(){t.removeClass("m-bg-list-item"),$(this).addClass("m-bg-list-item")})})}angular.module("visualApp").controller("SidenavController",t),t.$inject=["$scope","$state"]}(),function(){"use strict";function t(t){t.state("home",{parent:"app",url:"/",data:{authorities:[]},views:{"content@":{templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"vm"}}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e){}angular.module("visualApp").controller("HomeController",t),t.$inject=["$scope","$state"]}(),function(){"use strict";function t(t){t.state("smsnp",{parent:"dataset",url:"/datatset/smsnp",data:{authorities:[]},views:{"content@":{templateUrl:"app/dataset/smsnp/smsnp.html",controller:"SmsnpController",controllerAs:"vm"}}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,a){var n=this;n.isLoading=!0,a(function(){n.isLoading=!1},2e3)}angular.module("visualApp").controller("SmsnpController",t),t.$inject=["$scope","$state","$timeout"]}(),function(){"use strict";function t(t){t.state("matis",{parent:"dataset",url:"/datatset/matis",data:{authorities:[]},views:{"content@":{templateUrl:"app/dataset/matis/matis.html",controller:"MatisController",controllerAs:"vm"}}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,a,n){function r(t,a){e.go("textshow",{filePath:t})}$(document).ready(function(){function t(t){return t.forEach(function(t){t.size=parseInt(t.size),t.keys=t.file.split("/"),t.keys.forEach(function(e,a){t["section"+a]=e})}),burrow(t)}function e(t){function e(t){if(0===t.children.length){var e="content/"+a(t)+"/"+t.name;r(e)}}function a(t){return null==t.parent.parent?t.parent.name:a(t.parent)+"/"+t.parent.name}var n=o.nodes(t),s=o.links(n),u=l.selectAll(".link").data(s,function(t){return t.source.name+"-"+t.target.name});u.transition().delay(400).duration(600).attr("d",i),u.enter().append("path").attr("class","link").attr("d",i).style("opacity",0).transition().duration(300).delay(function(t,e){return 24*e}).style("opacity",1),u.exit().transition().duration(400).style("opacity",0).delay(400).remove();var c=l.selectAll(".node").moveToFront().data(n,function(t){return t.name+"-"+(t.parent?t.parent.name:"root")});c.exit().transition().duration(400).style("opacity",0).delay(400).remove(),c.transition().delay(400).duration(800).attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}),c.selectAll("text").transition().duration(800).attr("font-weight",null).attr("fill","#555").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(t){return t.name});var d=c.enter().append("g").attr("class","node").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).on("click",e).on("mouseover",function(t){var e=d3.select(this);e.select("text").attr("font-size","18px").attr("font-weight","bold"),e.select("circle").attr("r","6")}).on("mouseout",function(){var t=d3.select(this);t.select("text").attr("font-size","10px").attr("font-weight","normal"),t.select("circle").attr("r","3")});d.append("circle").attr("r",3).style("opacity",0).transition().duration(300).delay(function(t,e){return 24*e}).style("opacity",1),d.append("text").attr("dy",".31em").attr("font-weight","normal").attr("fill","black").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(t){return t.name}).style("opacity",0).transition().duration(300).delay(function(t,e){return 24*e}).style("opacity",1)}var a=960,n=120,o=d3.layout.tree().size([360,a/2-n]).separation(function(t,e){return(t.parent==e.parent?1:2)/t.depth}),i=d3.svg.diagonal.radial().projection(function(t){return[t.y,t.x/180*Math.PI]}),l=d3.select("#tree").append("svg").attr("width",a).attr("height",a).append("g").attr("transform","translate("+a/2+","+a/2+")");d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.tsv("content/data/matis-data-all.tsv",function(a){var n=t(a);e(n)}),d3.select(self.frameElement).style("height",a+"px")})}angular.module("visualApp").controller("MatisController",t),t.$inject=["$scope","$state","$mdDialog","$window"]}(),function(){"use strict";function t(t){t.state("maltext",{parent:"dataset",url:"/datatset/maltext",data:{authorities:[]},views:{"content@":{templateUrl:"app/dataset/maltext/maltext.html",controller:"MaltextController",controllerAs:"vm"}}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,a,n){function r(t,r){var o=a.confirm().title("Parse content").textContent(r).targetEvent(null).ok("Show").cancel("Tree");a.show(o).then(function(){var a="content/data/maltext/"+t+"/"+r;e.go("textshow",{filePath:a})},function(){var e="content/data/maltext/"+t+"/"+r;n.open("/wordtree.html?path="+e,"_self")})}$(document).ready(function(){function t(t,e){function a(t){return t.forEach(function(t){t.size=parseInt(t.size),t.keys=t.file.split("/"),t.keys.forEach(function(e,a){t["section"+a]=e})}),burrow(t)}function n(t){function e(t){0===t.children.length&&r(t.parent.name,t.name)}var a=l.nodes(t),n=l.links(a),o=u.selectAll(".link").data(n,function(t){return t.source.name+"-"+t.target.name});o.transition().delay(400).duration(600).attr("d",s),o.enter().append("path").attr("class","link").attr("d",s).style("opacity",0).transition().duration(300).delay(function(t,e){return 24*e}).style("opacity",1),o.exit().transition().duration(400).style("opacity",0).delay(400).remove();var i=u.selectAll(".node").moveToFront().data(a,function(t){return t.name+"-"+(t.parent?t.parent.name:"root")});i.exit().transition().duration(400).style("opacity",0).delay(400).remove(),i.transition().delay(400).duration(800).attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}),i.selectAll("text").transition().duration(800).attr("font-weight",null).attr("fill","#555").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(t){return t.name});var c=i.enter().append("g").attr("class","node").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).on("click",e).on("mouseover",function(t){var e=d3.select(this);e.select("text").attr("font-size","18px").attr("font-weight","bold"),e.select("circle").attr("r","6")}).on("mouseout",function(){var t=d3.select(this);t.select("text").attr("font-size","10px").attr("font-weight","normal"),t.select("circle").attr("r","3")});c.append("circle").attr("r",3).style("opacity",0).transition().duration(300).delay(function(t,e){return 24*e}).style("opacity",1),c.append("text").attr("dy",".31em").attr("font-weight","normal").attr("fill","black").attr("text-anchor",function(t){return t.x<180?"start":"end"}).attr("transform",function(t){return t.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(t){return t.name}).style("opacity",0).transition().duration(300).delay(function(t,e){return 24*e}).style("opacity",1)}var o=960,i=210,l=d3.layout.tree().size([360,o/2-i]).separation(function(t,e){return(t.parent==e.parent?1:2)/t.depth}),s=d3.svg.diagonal.radial().projection(function(t){return[t.y,t.x/180*Math.PI]}),u=d3.select(t).append("svg").attr("width",o).attr("height",o).append("g").attr("transform","translate("+o/2+","+o/2+")");d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.tsv(e,function(t){var e=a(t);n(e)}),d3.select(self.frameElement).style("height",o+"px")}t("#tree1","content/data/maltext-data-1.tsv"),t("#tree2","content/data/maltext-data-2.tsv")})}angular.module("visualApp").controller("MaltextController",t),t.$inject=["$scope","$state","$mdDialog","$window"]}(),function(){"use strict";function t(t){t.state("dataset",{parent:"app",abstract:!0})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(){function t(t,e){if(isNaN(e))return t;if(e<=0)return"";if(t){var a=t.split(/\s+/);a.length>e&&(t=a.slice(0,e).join(" ")+"...")}return t}return t}angular.module("visualApp").filter("words",t)}(),function(){"use strict";function t(){function t(t,e,a){if(isNaN(e))return t;if(e<=0)return"";if(t&&t.length>e){if(t=t.substring(0,e),a)for(;" "===t.charAt(t.length-1);)t=t.substr(0,t.length-1);else{var n=t.lastIndexOf(" ");n!==-1&&(t=t.substr(0,n))}return t+"..."}return t}return t}angular.module("visualApp").filter("characters",t)}(),function(){"use strict";function t(){function t(t,e,a,n){e.bind("click",function(){n.sort(a.jhSortBy)})}var e={restrict:"A",scope:!1,require:"^jhSort",link:t};return e}angular.module("visualApp").directive("jhSortBy",t)}(),function(){"use strict";function t(){var t={restrict:"A",scope:{predicate:"=jhSort",ascending:"=",callback:"&"},controller:e,controllerAs:"vm",bindToController:!0};return t}function e(t,e){function a(t){var e=t.find("span.glyphicon"),a="glyphicon-sort",n="glyphicon-sort-by-attributes",r="glyphicon-sort-by-attributes-alt",o=a+" "+r,l=n;i.ascending||(o=a+" "+n,l=r),i.resetClasses(),e.removeClass(o),e.addClass(l)}function n(){var t=e.find("span.glyphicon"),a="glyphicon-sort",n="glyphicon-sort-by-attributes",r="glyphicon-sort-by-attributes-alt";t.removeClass(n+" "+r),t.addClass(a)}function r(e){e!==i.predicate?i.ascending=!0:i.ascending=!i.ascending,i.predicate=e,t.$apply(),i.callback()}function o(t){i.resetClasses(),t&&"_score"!==t[0]&&i.applyClass(e.find("th[jh-sort-by='"+t[0]+"']"))}var i=this;i.applyClass=a,i.resetClasses=n,i.sort=r,i.triggerApply=o,t.$watchGroup(["vm.predicate","vm.ascending"],i.triggerApply),i.triggerApply()}angular.module("visualApp").directive("jhSort",t),e.$inject=["$scope","$element"]}(),function(){"use strict";function t(){function t(t){if(0===t.length)throw new Error("input must not be of zero length");var e=t.split(","),a={};return angular.forEach(e,function(t){var e=t.split(">;");if(2!==e.length)throw new Error('section could not be split on ">;"');var n=e[0].replace(/<(.*)/,"$1").trim(),r={};n.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(t,e,a,n){r[e]=n});var o=r.page;angular.isString(o)&&(o=parseInt(o));var i=e[1].replace(/rel="(.*)"/,"$1").trim();a[i]=o}),a}var e={parse:t};return e}angular.module("visualApp").factory("ParseLinks",t)}(),function(){"use strict";function t(){function t(t){return(100*t).toFixed(2)}var e={convertSmallNumberToPercent:t};return e}angular.module("visualApp").factory("NumberUtils",t),t.$inject=[]}(),function(){"use strict";angular.module("visualApp").constant("errorConstants",function(){var t="http://www.jhipster.tech/problem";return{EMAIL_ALREADY_USED_TYPE:t+"/email-already-used",LOGIN_ALREADY_USED_TYPE:t+"/login-already-used",EMAIL_NOT_FOUND_TYPE:t+"/email-not-found"}}())}(),function(){"use strict";function t(t){function e(t){return t?new Date(t):null}function a(t){if(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])}return null}function n(e){return e?t("date")(e,"yyyy-MM-dd"):null}function r(){return"yyyy-MM-dd"}var o={convertDateTimeFromServer:e,convertLocalDateFromServer:a,convertLocalDateToServer:n,dateformat:r};return o}angular.module("visualApp").factory("DateUtils",t),t.$inject=["$filter"]}(),function(){"use strict";function t(t){function e(t){return angular.isString(t)?t.length<30?t:t?t.substring(0,15)+"..."+t.slice(-10):"":""}function a(t){function e(t,e){return e.indexOf(t,e.length-t.length)!==-1}function a(t){return e("==",t)?2:e("=",t)?1:0}function n(t){return t.length/4*3-a(t)}function r(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" bytes"}return angular.isString(t)?r(n(t)):""}function n(e,a){t.open("data:"+e+";base64,"+a,"_blank","height=300,width=400")}function r(t,e){var a=new FileReader;a.readAsDataURL(t),a.onload=function(t){var a=t.target.result.substr(t.target.result.indexOf("base64,")+"base64,".length);e(a)}}var o={abbreviate:e,byteSize:a,openFile:n,toBase64:r};return o}angular.module("visualApp").factory("DataUtils",t),t.$inject=["$window"]}(),function(){"use strict";function t(){function t(t){var e={Person:"#E91E63",GeographicFeature:"#607D8B",Location:"#2196F3",Company:"#4CAF50",Facility:"#8BC34A",Broadcaster:"#FF9800",Quantity:"#795548"};return e[t]}var e={getColorFromText:t};return e}angular.module("visualApp").factory("ColorUtils",t),t.$inject=[]}(),function(){"use strict";function t(){function t(t){return null!==t&&(t=t.toLowerCase(),t=t.substring(0,1).toUpperCase()+t.substring(1)),t}return t}angular.module("visualApp").filter("capitalize",t)}(),function(){"use strict";function t(){function t(t){for(var e,n,r,o,i,l,s,u="",c=0;c<t.length;)e=t.charCodeAt(c++),n=t.charCodeAt(c++),r=t.charCodeAt(c++),o=e>>2,i=(3&e)<<4|n>>4,l=(15&n)<<2|r>>6,s=63&r,isNaN(n)?l=s=64:isNaN(r)&&(s=64),u=u+a.charAt(o)+a.charAt(i)+a.charAt(l)+a.charAt(s);return u}function e(t){var e,n,r,o,i,l,s,u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)o=a.indexOf(t.charAt(c++)),i=a.indexOf(t.charAt(c++)),l=a.indexOf(t.charAt(c++)),s=a.indexOf(t.charAt(c++)),e=o<<2|i>>4,n=(15&i)<<4|l>>2,r=(3&l)<<6|s,u+=String.fromCharCode(e),64!==l&&(u+=String.fromCharCode(n)),64!==s&&(u+=String.fromCharCode(r));return u}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={decode:e,encode:t};return n}angular.module("visualApp").factory("Base64",t)}(),function(){"use strict";function t(t,e,a,n){function r(){t.VERSION=n;var e=t.$on("$stateChangeStart",function(e,n,r,o){t.toState=n,t.toStateParams=r,t.fromState=o,n.external&&(e.preventDefault(),a.open(n.url,"_self"))}),r=t.$on("$stateChangeSuccess",function(t,e,n,r,o){var i="StatNLP Playground";e.data.pageTitle&&(i=e.data.pageTitle),a.document.title=i});t.$on("$destroy",function(){angular.isDefined(e)&&null!==e&&e(),angular.isDefined(r)&&null!==r&&r()})}return{initialize:r}}angular.module("visualApp").factory("stateHandler",t),t.$inject=["$rootScope","$state","$window","VERSION"]}(),function(){"use strict";function t(t){t.theme("default").primaryPalette("light-blue").accentPalette("pink")}angular.module("visualApp").config(t),t.$inject=["$mdThemingProvider"]}(),function(){"use strict";function t(t,e){t.otherwise("/"),e.type("boolean",{name:"boolean",decode:function(t){return t===!0||"true"===t},encode:function(t){return t?1:0},equals:function(t,e){return this.is(t)&&t===e},is:function(t){return[!0,!1,0,1].indexOf(t)>=0},pattern:/bool|true|0|1/})}angular.module("visualApp").config(t),t.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"]}(),function(){"use strict";function t(t,e){t.debugInfoEnabled(e)}angular.module("visualApp").config(t),t.$inject=["$compileProvider","DEBUG_INFO_ENABLED"]}(),function(){"use strict";function t(t){t.setOptions({colors:["#2196F3","#00ADF9","#DCDCDC","#46BFBD","#FDB45C","#949FB1","#4D5360"]}),t.setOptions("line",{showLines:!1})}angular.module("visualApp").config(t),t.$inject=["ChartJsProvider"]}(),function(){"use strict";function t(t){t.state("app",{abstract:!0,views:{sidenav:{templateUrl:"app/layouts/sidenav.html",controller:"SidenavController",controllerAs:"vm"}}})}angular.module("visualApp").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("visualApp").constant("VERSION","0.0.1-SNAPSHOT").constant("DEBUG_INFO_ENABLED",!1).constant("BUILD_TIMESTAMP",1515565865682);
}(),function(){angular.module("visualApp").run(["$templateCache",function(t){t.put("app/home/home.html",'<div layout="row" layout-padding><div layout="column" layout-padding class="md-whiteframe-1dp layout-align-center-center m-home" flex><div><img src="content/images/logo-statnlp-65df37362a.png" class="md-card-image" alt="logo"></div><div><strong class="md-display-1">Unified Framework for Structured Prediction</strong></div><div layout="row" layout-align="center center"><a href="https://gitlab.com/sutd_nlp/statnlp-core" target="_blank"><md-button aria-label="GitLab" class="md-fab md-primary"><md-tooltip md-direction="bottom" md-visible="tooltipVisible">GitLab</md-tooltip><md-icon md-svg-src="content/icons/icon-gitlab-ab089c02c8.svg" aria-label="GitLab"></md-icon></md-button></a><a href="https://github.com/sutd-statnlp/" target="_blank"><md-button aria-label="GitHub" class="md-fab md-primary"><md-tooltip md-direction="bottom" md-visible="tooltipVisible">GitHub</md-tooltip><md-icon class="m-color-white" md-svg-src="content/icons/icon-github-ea8bb7f4b6.svg" aria-label="GitHub"></md-icon></md-button></a><a href="http://www.statnlp.org/" target="_blank"><md-button aria-label="Website" class="md-fab md-primary"><md-tooltip md-direction="bottom" md-visible="tooltipVisible">Website</md-tooltip><md-icon md-svg-src="content/icons/icon-web-c0b8848262.svg" aria-label="Website"></md-icon></md-button></a><a href="https://sutd.edu.sg/" target="_blank"><md-button aria-label="SUTD" class="md-fab md-primary"><md-tooltip md-direction="bottom" md-visible="tooltipVisible">SUTD</md-tooltip><md-icon md-svg-src="content/icons/icon-university-41cbbe6ece.svg" aria-label="SUTD"></md-icon></md-button></a></div></div></div>'),t.put("app/layouts/sidenav.html",'<md-sidenav class="md-sidenav-left m-sidenav" md-is-locked-open="$mdMedia(\'gt-md\')" md-whiteframe="4"><md-toolbar class="md-theme-indigo"><h1><a class="md-display-1 m-title" href="/"><strong>StatNLP Playground</strong></a></h1></md-toolbar><md-content><md-subheader class="md-primary">Results and Prediction</md-subheader><md-list-item ui-sref="nlu" data-state="nlu" md-ink-ripple="#ffffff" ng-click="null"><p><strong>Natural Language (NLU)</strong></p></md-list-item><md-subheader class="md-primary">Datasets</md-subheader><md-list-item ui-sref="smsnp" data-state="smsnp" md-ink-ripple="#ffffff" ng-click="null"><p><strong>NP-Annotated SMS</strong></p></md-list-item><md-list-item ui-sref="maltext" data-state="maltext" md-ink-ripple="#ffffff" ng-click="null"><p><strong>MalwareTextDB</strong></p></md-list-item><md-list-item ui-sref="matis" data-state="matis" md-ink-ripple="#ffffff" ng-click="null"><p><strong>Multilingual ATIS</strong></p></md-list-item></md-content></md-sidenav>'),t.put("app/dataset/maltext/maltext.html",'<md-tabs md-dynamic-height md-border-bottom class="m-taps"><md-tab label="Demo 1"><md-content><div class="m-tree"><div id="tree1"></div></div></md-content></md-tab><md-tab label="Demo 2"><md-content><div class="m-tree"><div id="tree2"></div></div></md-content></md-tab></md-tabs>'),t.put("app/dataset/matis/matis.html",'<div class="m-tree"><div id="tree"></div></div>'),t.put("app/dataset/smsnp/smsnp.html",'<md-tabs md-dynamic-height md-border-bottom class="m-taps"><md-tab label="Demo 1"><md-progress-linear ng-hide="!vm.isLoading" ng-disabled="!vm.isLoading" md-mode="indeterminate"></md-progress-linear><md-content><iframe width="100%" height="800px" src="https://datastudio.google.com/embed/reporting/1jbm9nULxc_0NbhjGQipwhavLgXWZGuOA/page/Ot4L" frameborder="0" style="border:0" allowfullscreen></iframe></md-content></md-tab><md-tab label="Demo 2"><md-content><iframe width="100%" height="800px" src="https://datastudio.google.com/embed/reporting/1jbm9nULxc_0NbhjGQipwhavLgXWZGuOA/page/3j7L" frameborder="0" style="border:0" allowfullscreen></iframe></md-content></md-tab></md-tabs>'),t.put("app/prediction/nlu/nlu.html",'<div layout-padding class="m-nlu"><form name="form" class="md-whiteframe-1dp" ng-submit="vm.submitAnalyze()"><md-input-container class="md-block"><label>Please enter text</label><textarea ng-model="vm.text" name="text" required md-maxlength="800" minlength="10" rows="5" md-select-on-focus></textarea><div ng-messages="form.text.$error"><div ng-message="required">This is required, must be more than 10 and less than 800 characters long.</div></div></md-input-container><div layout="row"><span flex></span> <button class="md-button md-raised md-primary md-right" type="submit"><span class="m-color-white">Analyze</span></button></div></form><div ng-hide="vm.isAnalyzing" layout-padding class="md-whiteframe-1dp m-chart"><md-tabs md-border-bottom><md-tab label="Emotion"><md-content layout="row"><div flex><canvas class="chart chart-pie" chart-data="vm.emotionChart.data" chart-labels="vm.emotionChart.labels"></canvas></div><div flex><canvas class="chart chart-bar" chart-data="vm.emotionChart.data" chart-labels="vm.emotionChart.labels"></canvas></div></md-content></md-tab><md-tab label="Keywords"><md-content layout="row"><div flex><canvas class="chart chart-polar-area" chart-data="vm.keywordChart.data" chart-labels="vm.keywordChart.labels"></canvas></div><div flex><canvas class="chart chart-line" chart-data="vm.keywordChart.data" chart-labels="vm.keywordChart.labels"></canvas></div></md-content></md-tab><md-tab label="Categories"><md-content layout="row"><div flex="25"></div><div flex><canvas class="chart chart-polar-area" chart-data="vm.categoryChart.data" chart-labels="vm.categoryChart.labels"></canvas></div><div flex="25"></div></md-content></md-tab><md-tab label="Entities"><md-content layout="row"><div flex><canvas class="chart chart-bar" chart-data="vm.entityChart.data" chart-labels="vm.entityChart.labels" chart-colors="vm.entityChart.colors"></canvas></div></md-content></md-tab></md-tabs></div></div>'),t.put("app/visual/textshow/textshow.html",'<div><md-progress-linear ng-disabled="!vm.isLoading" md-mode="indeterminate"></md-progress-linear><div id="vis"></div><form id="form"><div hidden><p style="position: absolute; right: 0; top: 0" id="status"></p><div style="text-align: center"><div id="presets"></div><div id="custom-area"><p><label for="text">Paste your text below!</label></p><p><textarea id="text"></textarea><button id="go" type="submit">Go!</button></p></div></div><div style="float: right; text-align: right"><p><label for="max">Number of words:</label><input type="number" value="6000" min="1" id="max"></p><p><label for="per-line"><input type="checkbox" id="per-line"> One word per line</label><!--<p><label for="colours">Colours:</label> <a href="#" id="random-palette">get random palette</a>--></p><p><label>Download:</label><button>SVG</button><!-- |\n                    <a id="download-png" href="#">PNG</a>--></p></div><div style="float: left"><p><label>Spiral:</label><label for="archimedean"><input type="radio" name="spiral" id="archimedean" value="archimedean" checked="checked"> Archimedean</label><label for="rectangular"><input type="radio" name="spiral" id="rectangular" value="rectangular"> Rectangular</label></p><p><label for="scale">Scale:</label><label for="scale-log"><input type="radio" name="scale" id="scale-log" value="log" checked="checked"> log n</label><label for="scale-sqrt"><input type="radio" name="scale" id="scale-sqrt" value="sqrt"> √n</label><label for="scale-linear"><input type="radio" name="scale" id="scale-linear" value="linear"> n</label></p><p><label for="font">Font:</label><input type="text" id="font" value="Impact"></p></div><div id="angles"><p><input type="number" id="angle-count" value="5" min="1"><label for="angle-count">orientations</label><label for="angle-from">from</label><input type="number" id="angle-from" value="-60" min="-90" max="90"> °<label for="angle-to">to</label><input type="number" id="angle-to" value="60" min="-90" max="90"> °</p></div></div></form></div>')}])}();